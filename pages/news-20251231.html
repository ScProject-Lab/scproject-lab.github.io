<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>SCLab - home</title>
        <link rel="stylesheet" href="/css/reset.css">
        <link rel="stylesheet" href="/css/base.css">
        <link rel="stylesheet" href="/css/components.css">
        <link rel="stylesheet" href="/css/layout.css">

        <link rel="stylesheet" href="/css/pages/index.css">
        <link rel="stylesheet" href="/css/pages/header.css">

        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet">
    </head>
    <body>
        <div id="header"></div>
        <main class="news">
            <div class="news-main">
                <h1>防災情報をDiscordに送るBotを作りたい！！！</h1>
                <p class="news-main-date">記事 - 2025/12/18</p>
                <hr>
                <article class="news-content">
                    <p>
                        この記事は防災アプリ <a href="https://adventar.org/calendars/11308" target="_blank">Advent Calendar 2025 24日目</a>と、<a href="https://qiita.com/advent-calendar/2025/student" target="_blank">Qiita全国学生対抗戦 Advent Calendar 2025</a>の記事です。<br>
                        23日目(前日)は、ホヤさんの<a href="後で入れる" target="_blank">韓国の地震速報・地震情報について</a>でした。<br><br>

                        こんにちは。時の流れは早いですね。2024年の能登半島地震がほんの数週間前のように感じます。<br><br>

                        さて、皆さんはDiscordを何に使っていますか？ゲームのチャット、業務連絡、友達とのやり取りなど、色々な用途で使っていると思います。<br>
                        そんな身近なDiscordですが、このサービスは外部のプログラムからもメッセージを送信できるのはご存じでしたか？そうです。Webhookです。<br>
                        私はこのWebhookを使い、主に地震情報を配信するBotを作成しています。まだ中学生なのでつたない文章かもしれませんが、最後まで読んでいってくれると飛び跳ねて喜びます。<br>
                        (防災情報って言ってますが主に地震の話です。ﾕﾙｼﾃ)<br><br>
                    </p>
                    <section>
                        <h2>私が地震に興味を持ったきっかけ</h2>
                        <p>
                            私は東北地方に住んでいて、2021年と2022年の福島県沖地震を経験しました。<br>
                            私が住んでいる地域は震度5強の揺れに見舞われました。当時小学生だった私はすでに眠りについていましたが、母に「地震が来る」と起こされ、そのただならぬ雰囲気に目が覚めました。建物の軋む音が聞こえた直後に家が揺れ始め、どうしたら良いかわからなかった私は、ただ布団の中で縮こまることしかできませんでした。幸い家屋に大きな被害はなく、本が棚から落ちる程度で済みました。<br><br>
                            翌朝、テレビに映る福島の被災地の様子を見て、昨夜私が感じた揺れとは比べ物にならない激しさを見て言葉を失いました。地震の怖さを初めて感じた瞬間でした。それ以来、私は「地震」に対して強い興味を抱くようになりました。
                        </p>
                    </section>
                    <section>
                        <h2>元旦の悲劇</h2>
                        <p>
                            地震からは2年が経ち、すっかり地震への関心も薄れてきた頃、スマホからけたたましいエリアメールの音が鳴り響きました。<br>
                            そうです。2024年の1月1日、元旦に起きた能登半島地震です。家族で慌てて机の下に隠れ、揺れに備えました。揺れが収まった後にテレビを付けると、テレビに映る石川県の様子が映されていました。そこで見た光景は、想像を絶するものでした。けたたましい轟音、倒壊する家、そして立ちすくむ人々など、画面越しに恐怖が伝わってきました。<br>
                            数分後、テレビを再び見ると「大津波警報」の文字が。私は再び言葉を失いました。同じ日本で、こんな恐ろしいことが起きているなんて、私は想像できませんでした。
                        </p>
                    </section>
                    <section>
                        <h2>プログラミングを知る</h2>
                        <p>
                            この2つの地震の経験を経て、私は地震情報Botの開発を始めました。<br>
                            そして一番最初に完成したものはこれです。
                        </p>
                        <img class="news-content-img" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F4189210%2F2cebff1e-abbc-40c8-96ba-5ae71d2535ed.png?ixlib=rb-4.0.0&auto=format&gif-q=60&q=75&w=1400&fit=max&s=c0dab476aa36199834b93ec0a0e7a4d5">
                        <p>
                            一見まともなように見えるかもしれませんが、実際は<span class="codeblock">深さ ごく浅い</span>が<span class="codeblock">深さ -1km</span>になったり、そもそも深発地震や単独点処理などで最大震度が予測されないときはクラッシュしたり、とにかく問題だらけでした。<br>
                            また、このときは自宅PCで動かしていたため、電気代や停電にも気を配る必要がありました。<br>
                        </p>
                        <img class="news-content-img" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F4189210%2Ffb554031-0dff-42eb-8a8d-68f549fcdc9b.png?ixlib=rb-4.0.0&auto=format&gif-q=60&q=75&w=1400&fit=max&s=b069f8f49180e9e667d80242dc8e5148">
                        <p>
                            こちらの試験的に導入してみた地震情報Botも、深さに単位がつかないわ、秒が全部<span class="codeblock">:00</span>になるわで改良の余地だらけでしたね。
                        </p>
                    </section>
                    <section>
                        <h2>Oracle cloudとの出会い</h2>
                        <p>
                            これまではすべての処理を自宅PCで行っていたため、常にPCのリソースを消費してしまったり、安定性が低かったり、とても実用には堪え難い環境で運用していました。<br>
                            そこで、VPSサービスを探したり、レンタルサーバーを使ってみたりしましたが、どれも納得の行くものではありませんでした。<br>
                            そこで私の知り合いから朗報が入ります。どうやら、Oracle Cloudというサービスを使えば、無料で仮想マシンが使えるとのこと。もうね、そんなの使うしかないと思いましたね。<br>
                            登録を済ませ、早速使って見ました。現在は<span class="codeblock">2 CPU・16GB RAM</span>の構成で動かしています。1つのBotを動かすにはオーバースペックすぎる気もしますが、細かいことは気にしないでおきましょう。<br>
                        </p>
                        <h3>そして現在</h3>
                        <p>かなり飛びましたが、このβ0.7が現在のBotの最新バージョンです。</p>
                        <img class="news-content-img" src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F4189210%2F4b879c64-d60a-4cd0-925b-9178b8c17656.png?ixlib=rb-4.0.0&auto=format&gif-q=60&q=75&w=1400&fit=max&s=8be2598cdfd70a2d834759ee4ddb1794">
                        <p>
                            これは先日の青森県東方沖で発生した地震のEEWの通知です。見てわかるように、前のバージョンからかなり進化しているのが見て取れると思います。<br><br>
                            進化点<br>
                            <ul>
                                <li>震度表記を5-や6+から6強などに変更</li>
                                <li>緊急地震速報(警報)の通知に対象地域を追加</li>
                                <li>例外の情報を受信してもクラッシュしないように(震度不明など)</li>
                                <li>情報を簡潔でわかりやすく</li>
                            </ul>
                            自分としては中々満足できる出来ですが、改善点もたくさんあります。自分を律するためにもたくさん書いておきます。<br><br>

                            改善点<br>
                            <ul>
                                <li>震源地の表記を緯度経度から地名に変更</li>
                                <li>深さの単位をkmに変更</li>
                                <li>地震情報以外の防災情報にも対応させる</li>
                                <li>コードの整理</li>
                                <li>対象地域が分かりづらい → 北海道　東北のようにわかりやすく</li>
                                <li>地図をつける</li>
                                <li>BOTアカウントにして公開する予定だったのに、いつの間にかWebhookになってる</li>
                                <li>PLUM報に対応していない(M1.0になってしまう)</li>
                                <li>津波情報に対応させる(P2P地震情報 or 気象庁XMLで迷い中)</li>
                                <li>一般的な防災情報に対応させる(気象警報・土砂災害警戒情報など)</li>
                                <li>雑コードを治す</li>
                                <li>モチベーションを切らさない</li>
                            </ul>
                            これ全部を一気に実装するとなると、相当な気力と時間が必要になってしまうので、学校終わりや休日の空き時間などにまったり開発していきたいです。
                        </p>
                    </section>
                    <section>
                        <h2>終わりに</h2>
                        <p>
                            ここまで長々と体験談・開発記録を載せてきましたが、やはり地震というのは奥深いですね。<br>
                            この記事を書いていたら再びモチベーションが湧いてきたので、冬休みに突入したら再びBotが進化を遂げそうです。最後まで読んでいただき、ありがとうございました。<br><br>
                            <span class="news-ps">- p.s 深夜1時に勢いで書いた記事なのでおかしいとこがあるかもしれません　校正は大事(´・ω・｀)</span>
                        </p>
                    </section>
                </article>
            </div>
        </main>
        <div id="footer"></div>
        <script src="/js/load-header.js" defer></script>
        <script src="/js/load-footer.js" defer></script>
    </body>
</html>